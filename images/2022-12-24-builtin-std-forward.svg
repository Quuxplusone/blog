<svg version="1.1" xmlns="http://www.w3.org/2000/svg" width="1200" height="350" viewBox="0 0 1200 350">

<style>
  .technique {
    font-family: monospace;
    font-size: 8px;
    text-align: center;
  }
  .optlevel {
    font-family: monospace;
    font-size: 12px;
    text-align: center;
  }
</style>

<!--
Bars are generated with this Python script.
The color scheme is due to Paul Tol, https://personal.sron.nl/~pault/
colors = ["#55A4D1", "#DD7760", "#55BBAF", "#0077BB", "#CC3311", "#009988"]
groups = [
    ("-O0", [
      (["detail::fwd", "-fno-builtin"], [105.446, 105.018, 104.250, 105.433]),
      (["std::forward", "-fno-builtin"], [105.764, 101.277, 105.448, 105.485]),
      (["cast", "-fno-builtin"], [96.116, 90.547, 94.220, 96.161]),
      (["detail::fwd", ""], [86.178, 84.713, 85.307, 84.149]),
      (["std::forward", ""], [102.347, 98.442, 98.936, 98.372]),
      (["cast", ""], [72.412, 70.380, 71.685, 72.901]),
    ]),
    ("-O2 -g", [
      (["detail::fwd", "-fno-builtin"], [219.302, 222.941, 218.765, 219.658]),
      (["std::forward", "-fno-builtin"], [218.800, 218.027, 220.619, 223.429]),
      (["cast", "-fno-builtin"], [234.485, 208.810, 210.371, 204.780]),
      (["detail::fwd", ""], [229.956, 225.573, 232.986, 229.589]),
      (["std::forward", ""], [228.219, 219.064, 219.168, 225.744]),
      (["cast", ""], [207.683, 200.970, 205.881, 202.192]),
    ]),
    ("-O3", [
      (["detail::fwd", "-fno-builtin"], [171.319, 170.463, 168.401, 169.107]),
      (["std::forward", "-fno-builtin"], [182.072, 172.359, 168.253, 164.591]),
      (["cast", "-fno-builtin"], [161.519, 159.645, 164.054, 158.171]),
      (["detail::fwd", ""], [170.144, 169.438, 167.295, 167.894]),
      (["std::forward", ""], [167.295, 164.605, 164.631, 164.806]),
      (["cast", ""], [158.101, 155.025, 156.924, 156.146]),
    ]),
]
BarWidth = 12
BaselineY = 250
TechniqueY = 260
OptLevelY = 300
cx = 30
for (optlevel, results) in groups:
  print('<text x="%d" y="%d" text-anchor="middle" class="optlevel">%s</text>' % (cx + BarWidth*29/2, OptLevelY, optlevel))
  perfBaseline = sum(results[4][1]) / len(results[4][1])
  for (color, (technique, bars)) in zip(colors, results):
    print('<g>')
    perf = sum(bars) / len(bars)
    for dy, line in enumerate(technique + ['%d%%' % int(100 * (perf / perfBaseline) + 0.5)]):
      print('  <text x="%d" y="%d" text-anchor="middle" class="technique">%s</text>' % (cx + BarWidth*4/2, TechniqueY + 9*dy, line))
    for h in bars:
      print('  <rect x="%d" y="%d" fill="%s" width="%d" height="%.3f"/>' % (cx, BaselineY - h, color, BarWidth, h))
      cx += BarWidth
    print('</g>')
    cx += BarWidth
  cx += BarWidth
-->

<text x="204" y="300" text-anchor="middle" class="optlevel">-O0</text>
<g>
  <text x="54" y="260" text-anchor="middle" class="technique">detail::fwd</text>
  <text x="54" y="269" text-anchor="middle" class="technique">-fno-builtin</text>
  <text x="54" y="278" text-anchor="middle" class="technique">106%</text>
  <rect x="30" y="144" fill="#55A4D1" width="12" height="105.446"/>
  <rect x="42" y="144" fill="#55A4D1" width="12" height="105.018"/>
  <rect x="54" y="145" fill="#55A4D1" width="12" height="104.250"/>
  <rect x="66" y="144" fill="#55A4D1" width="12" height="105.433"/>
</g>
<g>
  <text x="114" y="260" text-anchor="middle" class="technique">std::forward</text>
  <text x="114" y="269" text-anchor="middle" class="technique">-fno-builtin</text>
  <text x="114" y="278" text-anchor="middle" class="technique">105%</text>
  <rect x="90" y="144" fill="#DD7760" width="12" height="105.764"/>
  <rect x="102" y="148" fill="#DD7760" width="12" height="101.277"/>
  <rect x="114" y="144" fill="#DD7760" width="12" height="105.448"/>
  <rect x="126" y="144" fill="#DD7760" width="12" height="105.485"/>
</g>
<g>
  <text x="174" y="260" text-anchor="middle" class="technique">cast</text>
  <text x="174" y="269" text-anchor="middle" class="technique">-fno-builtin</text>
  <text x="174" y="278" text-anchor="middle" class="technique">95%</text>
  <rect x="150" y="153" fill="#55BBAF" width="12" height="96.116"/>
  <rect x="162" y="159" fill="#55BBAF" width="12" height="90.547"/>
  <rect x="174" y="155" fill="#55BBAF" width="12" height="94.220"/>
  <rect x="186" y="153" fill="#55BBAF" width="12" height="96.161"/>
</g>
<g>
  <text x="234" y="260" text-anchor="middle" class="technique">detail::fwd</text>
  <text x="234" y="269" text-anchor="middle" class="technique"></text>
  <text x="234" y="278" text-anchor="middle" class="technique">85%</text>
  <rect x="210" y="163" fill="#0077BB" width="12" height="86.178"/>
  <rect x="222" y="165" fill="#0077BB" width="12" height="84.713"/>
  <rect x="234" y="164" fill="#0077BB" width="12" height="85.307"/>
  <rect x="246" y="165" fill="#0077BB" width="12" height="84.149"/>
</g>
<g>
  <text x="294" y="260" text-anchor="middle" class="technique">std::forward</text>
  <text x="294" y="269" text-anchor="middle" class="technique"></text>
  <text x="294" y="278" text-anchor="middle" class="technique">100%</text>
  <rect x="270" y="147" fill="#CC3311" width="12" height="102.347"/>
  <rect x="282" y="151" fill="#CC3311" width="12" height="98.442"/>
  <rect x="294" y="151" fill="#CC3311" width="12" height="98.936"/>
  <rect x="306" y="151" fill="#CC3311" width="12" height="98.372"/>
</g>
<g>
  <text x="354" y="260" text-anchor="middle" class="technique">cast</text>
  <text x="354" y="269" text-anchor="middle" class="technique"></text>
  <text x="354" y="278" text-anchor="middle" class="technique">72%</text>
  <rect x="330" y="177" fill="#009988" width="12" height="72.412"/>
  <rect x="342" y="179" fill="#009988" width="12" height="70.380"/>
  <rect x="354" y="178" fill="#009988" width="12" height="71.685"/>
  <rect x="366" y="177" fill="#009988" width="12" height="72.901"/>
</g>
<text x="576" y="300" text-anchor="middle" class="optlevel">-O2 -g</text>
<g>
  <text x="426" y="260" text-anchor="middle" class="technique">detail::fwd</text>
  <text x="426" y="269" text-anchor="middle" class="technique">-fno-builtin</text>
  <text x="426" y="278" text-anchor="middle" class="technique">99%</text>
  <rect x="402" y="30" fill="#55A4D1" width="12" height="219.302"/>
  <rect x="414" y="27" fill="#55A4D1" width="12" height="222.941"/>
  <rect x="426" y="31" fill="#55A4D1" width="12" height="218.765"/>
  <rect x="438" y="30" fill="#55A4D1" width="12" height="219.658"/>
</g>
<g>
  <text x="486" y="260" text-anchor="middle" class="technique">std::forward</text>
  <text x="486" y="269" text-anchor="middle" class="technique">-fno-builtin</text>
  <text x="486" y="278" text-anchor="middle" class="technique">99%</text>
  <rect x="462" y="31" fill="#DD7760" width="12" height="218.800"/>
  <rect x="474" y="31" fill="#DD7760" width="12" height="218.027"/>
  <rect x="486" y="29" fill="#DD7760" width="12" height="220.619"/>
  <rect x="498" y="26" fill="#DD7760" width="12" height="223.429"/>
</g>
<g>
  <text x="546" y="260" text-anchor="middle" class="technique">cast</text>
  <text x="546" y="269" text-anchor="middle" class="technique">-fno-builtin</text>
  <text x="546" y="278" text-anchor="middle" class="technique">96%</text>
  <rect x="522" y="15" fill="#55BBAF" width="12" height="234.485"/>
  <rect x="534" y="41" fill="#55BBAF" width="12" height="208.810"/>
  <rect x="546" y="39" fill="#55BBAF" width="12" height="210.371"/>
  <rect x="558" y="45" fill="#55BBAF" width="12" height="204.780"/>
</g>
<g>
  <text x="606" y="260" text-anchor="middle" class="technique">detail::fwd</text>
  <text x="606" y="269" text-anchor="middle" class="technique"></text>
  <text x="606" y="278" text-anchor="middle" class="technique">103%</text>
  <rect x="582" y="20" fill="#0077BB" width="12" height="229.956"/>
  <rect x="594" y="24" fill="#0077BB" width="12" height="225.573"/>
  <rect x="606" y="17" fill="#0077BB" width="12" height="232.986"/>
  <rect x="618" y="20" fill="#0077BB" width="12" height="229.589"/>
</g>
<g>
  <text x="666" y="260" text-anchor="middle" class="technique">std::forward</text>
  <text x="666" y="269" text-anchor="middle" class="technique"></text>
  <text x="666" y="278" text-anchor="middle" class="technique">100%</text>
  <rect x="642" y="21" fill="#CC3311" width="12" height="228.219"/>
  <rect x="654" y="30" fill="#CC3311" width="12" height="219.064"/>
  <rect x="666" y="30" fill="#CC3311" width="12" height="219.168"/>
  <rect x="678" y="24" fill="#CC3311" width="12" height="225.744"/>
</g>
<g>
  <text x="726" y="260" text-anchor="middle" class="technique">cast</text>
  <text x="726" y="269" text-anchor="middle" class="technique"></text>
  <text x="726" y="278" text-anchor="middle" class="technique">92%</text>
  <rect x="702" y="42" fill="#009988" width="12" height="207.683"/>
  <rect x="714" y="49" fill="#009988" width="12" height="200.970"/>
  <rect x="726" y="44" fill="#009988" width="12" height="205.881"/>
  <rect x="738" y="47" fill="#009988" width="12" height="202.192"/>
</g>
<text x="948" y="300" text-anchor="middle" class="optlevel">-O3</text>
<g>
  <text x="798" y="260" text-anchor="middle" class="technique">detail::fwd</text>
  <text x="798" y="269" text-anchor="middle" class="technique">-fno-builtin</text>
  <text x="798" y="278" text-anchor="middle" class="technique">103%</text>
  <rect x="774" y="78" fill="#55A4D1" width="12" height="171.319"/>
  <rect x="786" y="79" fill="#55A4D1" width="12" height="170.463"/>
  <rect x="798" y="81" fill="#55A4D1" width="12" height="168.401"/>
  <rect x="810" y="80" fill="#55A4D1" width="12" height="169.107"/>
</g>
<g>
  <text x="858" y="260" text-anchor="middle" class="technique">std::forward</text>
  <text x="858" y="269" text-anchor="middle" class="technique">-fno-builtin</text>
  <text x="858" y="278" text-anchor="middle" class="technique">104%</text>
  <rect x="834" y="67" fill="#DD7760" width="12" height="182.072"/>
  <rect x="846" y="77" fill="#DD7760" width="12" height="172.359"/>
  <rect x="858" y="81" fill="#DD7760" width="12" height="168.253"/>
  <rect x="870" y="85" fill="#DD7760" width="12" height="164.591"/>
</g>
<g>
  <text x="918" y="260" text-anchor="middle" class="technique">cast</text>
  <text x="918" y="269" text-anchor="middle" class="technique">-fno-builtin</text>
  <text x="918" y="278" text-anchor="middle" class="technique">97%</text>
  <rect x="894" y="88" fill="#55BBAF" width="12" height="161.519"/>
  <rect x="906" y="90" fill="#55BBAF" width="12" height="159.645"/>
  <rect x="918" y="85" fill="#55BBAF" width="12" height="164.054"/>
  <rect x="930" y="91" fill="#55BBAF" width="12" height="158.171"/>
</g>
<g>
  <text x="978" y="260" text-anchor="middle" class="technique">detail::fwd</text>
  <text x="978" y="269" text-anchor="middle" class="technique"></text>
  <text x="978" y="278" text-anchor="middle" class="technique">102%</text>
  <rect x="954" y="79" fill="#0077BB" width="12" height="170.144"/>
  <rect x="966" y="80" fill="#0077BB" width="12" height="169.438"/>
  <rect x="978" y="82" fill="#0077BB" width="12" height="167.295"/>
  <rect x="990" y="82" fill="#0077BB" width="12" height="167.894"/>
</g>
<g>
  <text x="1038" y="260" text-anchor="middle" class="technique">std::forward</text>
  <text x="1038" y="269" text-anchor="middle" class="technique"></text>
  <text x="1038" y="278" text-anchor="middle" class="technique">100%</text>
  <rect x="1014" y="82" fill="#CC3311" width="12" height="167.295"/>
  <rect x="1026" y="85" fill="#CC3311" width="12" height="164.605"/>
  <rect x="1038" y="85" fill="#CC3311" width="12" height="164.631"/>
  <rect x="1050" y="85" fill="#CC3311" width="12" height="164.806"/>
</g>
<g>
  <text x="1098" y="260" text-anchor="middle" class="technique">cast</text>
  <text x="1098" y="269" text-anchor="middle" class="technique"></text>
  <text x="1098" y="278" text-anchor="middle" class="technique">95%</text>
  <rect x="1074" y="91" fill="#009988" width="12" height="158.101"/>
  <rect x="1086" y="94" fill="#009988" width="12" height="155.025"/>
  <rect x="1098" y="93" fill="#009988" width="12" height="156.924"/>
  <rect x="1110" y="93" fill="#009988" width="12" height="156.146"/>
</g>

</svg>

